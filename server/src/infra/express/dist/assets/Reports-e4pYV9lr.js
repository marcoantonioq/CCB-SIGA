import{d as I,r as C,a as S,o as k,c as r,b as t,w as p,v as m,n as v,e as h,F as b,f as _,s as D,g as i,t as n,p as F,h as M,_ as E}from"./index-cGrtRTBD.js";const l=u=>(F("data-v-bf5f6155"),u=u(),M(),u),T={class:"input-field"},O=l(()=>t("label",{for:"date1Input"},"Data inicial:",-1)),$={class:"input-field"},B=l(()=>t("label",{for:"date2Input"},"Data final:",-1)),R={class:"abas"},V=l(()=>t("h3",null,"Igrejas",-1)),A={ref:"tabela"},q=l(()=>t("thead",null,[t("tr",null,[t("th",null,"ID"),t("th",null,"Nome"),t("th",null,"Membros")])],-1)),L=l(()=>t("h3",null,"Fluxos",-1)),N=l(()=>t("thead",null,[t("tr",null,[t("th",null,"Fluxo"),t("th",null,"Categoria"),t("th",null,"Data"),t("th",null,"Valor"),t("th",null,"Detalhes"),t("th",null,"Igreja ID"),t("th",null,"Referência")])],-1)),U=I({__name:"Reports",setup(u){const c=new Date,x=new Date(c.getFullYear(),c.getMonth(),1),y=new Date(c.getFullYear(),c.getMonth()+1,0),o=C({date1:x.toISOString().slice(0,10),date2:y.toISOString().slice(0,10),dados:{igrejas:[],fluxos:[],tarefas:[]}}),d=S("igrejas");k(async()=>{try{const s=await fetch("/api/dados");if(s.ok){const{data:a}=await s.json();o.dados.igrejas=a.igrejas,o.dados.fluxos=a.fluxos,o.dados.tarefas=a.tarefas,console.log("Dados recebidos: ",a)}else throw new Error("Erro ao buscar os dados do servidor.")}catch(s){console.error("Erro ao buscar os dados:",s)}});const j=s=>new Date(s).toLocaleString().replace(", 00:00:00",""),f=s=>{d.value=s},g=s=>{const a=document.createElement("textarea");a.value=s.map(e=>Object.values(e).join("	")).join(`
`),document.body.appendChild(a),a.select();try{document.execCommand("copy"),D.notify("Copiado para área de transferência!")}catch(e){const w=`Erro ao copiar ${e}`;D.notify(w)}finally{document.body.removeChild(a)}};return(s,a)=>(i(),r("div",null,[t("div",T,[O,p(t("input",{id:"date1Input","onUpdate:modelValue":a[0]||(a[0]=e=>o.date1=e),type:"date",required:""},null,512),[[m,o.date1]])]),t("div",$,[B,p(t("input",{id:"date2Input","onUpdate:modelValue":a[1]||(a[1]=e=>o.date2=e),type:"date",required:""},null,512),[[m,o.date2]])]),t("div",R,[t("div",{class:v(["aba",{ativa:d.value==="igrejas"}]),onClick:a[2]||(a[2]=e=>f("igrejas"))}," Igrejas ",2),t("div",{class:v(["aba",{ativa:d.value==="fluxos"}]),onClick:a[3]||(a[3]=e=>f("fluxos"))}," Fluxos ",2)]),p(t("div",{class:"cursor",onClick:a[4]||(a[4]=e=>g(o.dados.igrejas))},[V,t("table",A,[q,t("tbody",null,[(i(!0),r(b,null,_(o.dados.igrejas,e=>(i(),r("tr",{key:e.id},[t("td",null,n(e.id),1),t("td",null,n(e.nome.replace(/BR \d+-\d+ - /,"")),1),t("td",null,n(e.membros),1)]))),128))])],512)],512),[[h,d.value==="igrejas"]]),p(t("div",{class:"cursor",onClick:a[5]||(a[5]=e=>g(o.dados.fluxos))},[L,t("table",null,[N,t("tbody",null,[(i(!0),r(b,null,_(o.dados.fluxos.filter(e=>new Date(e.data).getTime()>=new Date(o.date1).getTime()&&new Date(e.data).getTime()<=new Date(o.date2).getTime()),e=>(i(),r("tr",{key:e.id},[t("td",null,n(e.fluxo),1),t("td",null,n(e.categoria),1),t("td",null,n(j(e.data)),1),t("td",null,n(e.valor),1),t("td",null,n(e.detalhes),1),t("td",null,n(e.igrejaId),1),t("td",null,n(e.ref),1)]))),128))])])],512),[[h,d.value==="fluxos"]])]))}}),z=E(U,[["__scopeId","data-v-bf5f6155"]]);export{z as default};
